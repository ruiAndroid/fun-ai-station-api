# fun-ai-station-api 配置文件（推荐）
# - 后端默认会读取本文件（无需设置 ENV_FILE，也不依赖当前工作目录）
# - 修改后重启后端服务生效

# Server
APP_NAME=fun-ai-station-api
ENV=prod
HOST=0.0.0.0
PORT=8001

# Database (MySQL 8)
DB_HOST=127.0.0.1
DB_PORT=3306
DB_NAME=db_funaistation
DB_USER=root
DB_PASSWORD=Ss123456!

# Auth
JWT_SECRET=change_me
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRES_MINUTES=60

# Agent service
FUN_AGENT_SERVICE_URL=http://127.0.0.1:4010
# Orchestrator service (routing + multi-agent execution)
# - Default: same as FUN_AGENT_SERVICE_URL
# - If you later split orchestration into a standalone service, set this URL.
ORCHESTRATOR_URL=

# 企业微信/开放平台消息自动路由策略
# - hybrid（默认）：显式@优先，其次LLM路由，失败则关键词兜底
# - llm：只用LLM路由（失败回退默认智能体）
# - keywords：只用关键词路由
ROUTER_MODE=llm
# Fallback dispatch parallelism (API-side only). 1 = sequential
DISPATCH_MAX_PARALLEL=3

# Scheduler Worker（定时任务）默认路由（可选）
# - 若不设置：沿用 OPENCLAW_DEFAULT_AGENT / ROUTER_MODE
# - 定时任务 payload 不支持覆盖路由参数（避免绕过编排层）
SCHEDULER_DEFAULT_AGENT=general
SCHEDULER_ROUTER_MODE=hybrid

# Scheduled tasks limits（安全限制）
# - interval 最小秒数（避免把系统打爆）
SCHEDULED_TASK_INTERVAL_MIN_SECONDS=10
# - 每个用户最多同时启用的定时任务数量（enabled=true）
SCHEDULED_TASKS_MAX_ENABLED_PER_USER=5

# Long task worker（长任务）execute 超时（秒）
# - 默认 600
LONG_TASK_EXECUTE_TIMEOUT_SECONDS=600

# Openclaw webhook (forward messages from another server)
# HMAC-SHA256: signature = hex(hmac_sha256(OPENCLAW_WEBHOOK_SECRET, f"{ts}.{raw_body}"))
OPENCLAW_WEBHOOK_SECRET=Ss123456!
OPENCLAW_MAX_SKEW_SECONDS=300
# Default agent code in fun-agent-service (see: GET /api/agent-service/agents)
OPENCLAW_DEFAULT_AGENT=attendance
# All OpenClaw inbound messages will be persisted under this user (testing-only).
OPENCLAW_SYSTEM_USER_EMAIL=jianrui@fun.tv
# Password used only when the user does not exist yet (testing-only).
OPENCLAW_SYSTEM_USER_PASSWORD=Ss123456!

# OpenAI-compatible API (for OpenClaw to call as LLM backend)
# OpenClaw side should use:
# - baseUrl: http://<你的域名或IP>/api/openai/v1
# - apiKey: OPENAI_API_KEY
OPENAI_API_KEY=Ss123456!
OPENAI_DEFAULT_AGENT=attendance
